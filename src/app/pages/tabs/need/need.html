<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{'Needs' | translate}}
    </ion-title>
  </ion-toolbar>
</ion-header>

<!-- todo: add elasticsearch support -->
<ion-content class="ion-padding">
  <ion-refresher [disabled]="plt.is('desktop')" slot="fixed" (ionRefresh)="loadAll($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-grid class="ion-no-padding">
    <ion-row>
      <ion-col size="6" *ngFor="let need of needs; trackBy: trackId">
        <ion-card class="ion-activatable ripple-parent" [ngClass]="need.available ? 'available' : 'not-available'"
          (click)="view(need)">
          <ion-card-content>

            <div>
              <img [src]="'data:' + need.imageContentType + ';base64,' + need.image" />
            </div>

            <ion-card-title>{{need.name}}</ion-card-title>
            <ion-card-subtitle>{{need.contact}}</ion-card-subtitle>
          </ion-card-content>

          <ion-ripple-effect></ion-ripple-effect>
        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-item *ngIf="!needs?.length">
    <ion-label>
      No Needs found.
    </ion-label>
  </ion-item>

</ion-content>
